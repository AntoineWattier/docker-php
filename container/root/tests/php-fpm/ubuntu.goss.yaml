gossfile:
  base.goss.yaml: {}

package:
  php7.0:
    installed: true
  php7.0-cli:
    installed: true
  php7.0-curl:
    installed: true
  php7.0-fpm:
    installed: true
  php7.0-gd:
    installed: true
  php7.0-intl:
    installed: true
  php7.0-json:
    installed: true
  php7.0-mbstring:
    installed: true
  php7.0-mcrypt:
    installed: true
  php7.0-mysql:
    installed: true
  php7.0-opcache:
    installed: true
  php7.0-pgsql:
    installed: true
  php7.0-readline:
    installed: true
  php7.0-xml:
    installed: true
  php7.0-zip:
    installed: true
  php-apcu:
    installed: true
  php-gearman:
    installed: true
  php-igbinary:
    installed: true
  php-memcache:
    installed: true
  php-memcached:
    installed: true
  php-msgpack:
    installed: true
  php-xdebug:
    installed: true

command:
  # Hack: enable and disable the various extensions to test their presence
  phpenmod yaml && php -m | grep yaml && phpdismod yaml:
    exit-status: 0
    stderr: ['!/./']

  phpenmod pgsql && php -m | grep pgsql && phpdismod pgsql:
    exit-status: 0
    stderr: ['!/./']

  phpenmod pdo_pgsql && php -m | grep pdo_pgsql && phpdismod pdo_pgsql:
    exit-status: 0
    stderr: ['!/./']

  phpenmod redis && php -m | grep redis && phpdismod redis:
    exit-status: 0
    stderr: ['!/./']

